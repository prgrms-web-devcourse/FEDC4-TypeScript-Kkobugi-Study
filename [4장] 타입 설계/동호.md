# ch04. íƒ€ì… ì„¤ê³„

---

# ì•„ì´í…œ 28 ìœ íš¨í•œ ìƒíƒœë§Œ í‘œí˜„í•˜ëŠ” íƒ€ì…ì„ ì§€í–¥í•˜ê¸°

---

### ìš”ì•½

- ìœ íš¨í•œ ìƒíƒœì™€ ë¬´íš¨í•œ ìƒíƒœë¥¼ ë‘˜ ë‹¤ í‘œí˜„í•˜ëŠ” íƒ€ì…ì€ í˜¼ë€ì„ ì´ˆë˜í•˜ê¸° ì‰½ê³  ì˜¤ë¥˜ë¥¼ ìœ ë°œí•˜ê²Œ ë©ë‹ˆë‹¤.
- ìœ íš¨í•œ ìƒíƒœë§Œ í‘œí˜„í•˜ëŠ” íƒ€ì…ì„ ì§€í–¥í•´ì•¼ í•©ë‹ˆë‹¤. ì½”ë“œê°€ ê¸¸ì–´ì§€ê±°ë‚˜ í‘œí˜„í•˜ê¸° ì–´ë µì§€ë§Œ ê²°êµ­ì€ ì‹œê°„ì„ ì ˆì•½í•˜ê³  ê³ í†µì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

- íš¨ê³¼ì ìœ¼ë¡œ íƒ€ì…ì„ ì„¤ê³„í•˜ë ¤ë©´ ìœ íš¨í•œ ìƒíƒœë§Œ í‘œí˜„í•  ìˆ˜ ìˆëŠ” íƒ€ì…ì„ ë§Œë“¤ì–´ ë‚´ëŠ” ê²ƒì´ ê°€ì¥ ì¤‘ìš”í•˜ë‹¤.
- ì–´ë– í•œ ê°’ë“¤ì„ í¬í•¨í•˜ê³ , ì–´ë– í•œ ê°’ë“¤ì„ ì œì™¸í• ì§€ ì‹ ì¤‘í•˜ê²Œ ìƒê°í•´ì•¼ í•œë‹¤.
- ìœ íš¨í•œ ìƒíƒœë¥¼ í‘œí˜„í•˜ëŠ” ê°’ë§Œ í—ˆìš©í•œë‹¤ë©´ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ì‰¬ì›Œì§€ê³  íƒ€ì… ì²´í¬ê°€ ìš©ì´í•´ì§„ë‹¤.

### ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“ ë‹¤ê³  ê°€ì •í•œë‹¤.

```tsx
// í˜ì´ì§€ì˜ ìƒíƒœ ì„¤ê³„
interface State {
	pageText: string;
	isloading: boolean;
	error?: string;
}
```

```tsx
// í˜ì´ì§€ë¥¼ ê·¸ë¦¬ëŠ” renderPage í•¨ìˆ˜
function renderPage(state: State) {
  if (state.error) {
    return `Error! Unable to load ${currentPage}: ${state.error}`;
  } else if (state.isLoading) {
    return `Loading ${currentPage}...`;
  }
  return `<h1>${currentPage}</h1>\n${state.pageText}`;
}
```

- ì½”ë“œ ë¶„ê¸° ì¡°ê±´ì´ ëª…í™•íˆ ë¶„ë¦¬ë˜ì–´ ìˆì§€ ì•Šë‹¤.
    - `isLoading`ì´ `true`ì´ë©´ì„œ ë™ì‹œì— `error`ê°’ì´ ì¡´ì¬í•˜ë©´ ë¡œë”© ì¤‘ì¸ì§€ ì—ëŸ¬ ë°œìƒ ìƒíƒœì¸ì§€ ëª…í™•íˆ êµ¬ë¶„í•  ìˆ˜ ì—†ë‹¤. í•„ìš”í•œ ì •ë³´ê°€ ë¶€ì¡±í•˜ë‹¤.

```tsx
// í˜ì´ì§€ë¥¼ ì „í™˜í•˜ëŠ” changePage í•¨ìˆ˜
async function changePage(state: State, newPage: string) {
  state.isLoading = true;
  try {
    const response = await fetch(getUrlForPage(newPage));
    if (!response.ok) {
      throw new Error(`Unable to load ${newPage}: ${response.statusText}`);
    }
    const text = await response.text();
    state.isLoading = false;
    state.pageText = text;
  } catch (e) {
    state.error = '' + e;
  }
```

- ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ state.isLoadingì„ falseë¡œ ì„¤ì •í•˜ëŠ” ë¡œì§ì´ ë¹ ì ¸ìˆë‹¤.
- state.errorë¥¼ ì´ˆê¸°í™”í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì—, í˜ì´ì§€ ì „í™˜ ì¤‘ì— ë¡œë”© ë©”ì‹œì§€ ëŒ€ì‹  ê³¼ê±°ì˜ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë³´ì—¬ ì£¼ê²Œ ëœë‹¤.
- í˜ì´ì§€ ë¡œë”© ì¤‘ ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ë°”ê¿” ë²„ë¦¬ë©´ ì–´ë–¤ ì¼ì´ ë²Œì–´ì§ˆ ì§€ ì˜ˆìƒí•˜ê¸° ì–´ë µë‹¤. ìƒˆ í˜ì´ì§€ì— ì—ëŸ¬ê°€ ëœ¨ê±°ë‚˜, ì‘ë‹µì´ ì˜¤ëŠ” ìˆœì„œì— ë”°ë¼ ë‘ ë²ˆì§¸ í˜ì´ì§€ê°€ ì•„ë‹Œ ì²« ë²ˆì§¸ í˜ì´ì§€ë¡œ ì „í™˜ë  ìˆ˜ë„ ìˆë‹¤.

### ì¡°ê¸ˆ ë” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœë¥¼ ì œëŒ€ë¡œ í‘œí˜„í•œ ë°©ë²•

```tsx
interface RequestPending {
  state: 'pending';
}
interface RequestError {
  state: 'error';
  error: string;
}
interface RequestSuccess {
  state: 'ok';
  pageText: string;
}
type RequestState = RequestPending | RequestError | RequestSuccess;

interface State {
  currentPage: string;
  requests: {[page: string]: RequestState};
}
```

- ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ê³¼ì • ê°ê°ì˜ ìƒíƒœë¥¼ ëª…ì‹œì ìœ¼ë¡œ ëª¨ë¸ë§í•˜ëŠ” íƒœê·¸ëœ ìœ ë‹ˆì˜¨ì´ ì‚¬ìš©ë˜ì—ˆë‹¤.
(stateê°€ ì‹ë³„ìê°€ ëœë‹¤.)
- ì½”ë“œ ê¸¸ì´ê°€ ê¸¸ì–´ì§€ê¸´ í–ˆìœ¼ë‚˜, ë¬´íš¨í•œ ìƒíƒœë¥¼ í—ˆìš©í•˜ì§€ ì•Šë„ë¡ í¬ê²Œ ê°œì„ ë˜ì—ˆë‹¤.
- ë°œìƒí•˜ëŠ” ëª¨ë“  ìš”ì²­ì˜ ìƒíƒœë¡œì„œ, ëª…ì‹œì ìœ¼ë¡œ ëª¨ë¸ë§ë˜ì—ˆë‹¤.

```tsx
function renderPage(state: State) {
  const {currentPage} = state;
  const requestState = state.requests[currentPage];
  switch (requestState.state) {
    case 'pending':
      return `Loading ${currentPage}...`;
    case 'error':
      return `Error! Unable to load ${currentPage}: ${requestState.error}`;
    case 'ok':
      return `<h1>${currentPage}</h1>\n${requestState.pageText}`;
  }
}
```

```tsx
async function changePage(state: State, newPage: string) {
  state.requests[newPage] = {state: 'pending'};
  state.currentPage = newPage;
  try {
    const response = await fetch(getUrlForPage(newPage));
    if (!response.ok) {
      throw new Error(`Unable to load ${newPage}: ${response.statusText}`);
    }
    const pageText = await response.text();
    state.requests[newPage] = {state: 'ok', pageText};
  } catch (e) {
    state.requests[newPage] = {state: 'error', error: '' + e};
  }
}
```

- í˜„ì¬ í˜ì´ì§€ê°€ ë¬´ì—‡ì¸ì§€ ëª…í™•í•˜ë©°, ëª¨ë“  ìš”ì²­ì€ ì •í™•íˆ í•˜ë‚˜ì˜ ìƒíƒœë¡œ ë§ì•„ ë–¨ì–´ì§„ë‹¤.
- ìš”ì²­ ì¤‘ì¼ ë•Œ ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ë³€ê²½í•˜ë”ë¼ë„ ë¬¸ì œê°€ ì—†ë‹¤.

### **ğŸ™„ ìœ íš¨í•œ, ë¬´íš¨í•œ ìƒíƒœë¼ëŠ” ê²ƒì´ ë¬´ì—‡ì¼ê¹Œ?**

**â€˜ìœ íš¨í•œ ìƒíƒœâ€™**ëŠ” í”„ë¡œê·¸ë˜ë° ê´€ì ì—ì„œ ë³´ë©´ ì´ëŠ” **ì–´ë”˜ê°€ì— ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” ìƒíƒœ**ë¥¼ ë§í•œë‹¤.

```tsx
interface State {
  a: string;
  b: string;
  c?: string;
  d?: string;
}
```

- ìœ„ì™€ ê°™ì€ ìƒíƒœê°€ ìˆì„ ë•Œ, ì•„ë˜ì™€ ê°™ì´ ì—¬ëŸ¬ ê°€ì§€ ìƒíƒœë¥¼ í¬í•¨í•œë‹¤.

```tsx
interface StateOne {
	a: string;
	b: string;
}
interface StateTwo {
	a: string;
	b: string;
	c: string;
}
interface StateThree {
	a: string;
	b: string;
	d: string;
}
interface StateFour {
	a: string;
	b: string;
	c: string;
	d: string;
}
```

- ë§Œì•½ ë‚´ê°€ ì›í•˜ëŠ” íƒ€ì…ì´ StateOne, StateTwo, StateThreeë¼ë©´ StateFourëŠ” **`ë¬´íš¨í•œ ìƒíƒœ`**ê°€ ëœë‹¤.
- ê·¸ëŸ¬ë¯€ë¡œ State ì¸í„°í˜ì´ìŠ¤ëŠ” ë¬´íš¨í•œ ìƒíƒœë¥¼ í¬í•¨í•˜ê¸°ì— í˜¼ë€ì„ ì´ˆë˜í•  ìˆ˜ ìˆê³  ì—ëŸ¬ë¥¼ ìœ ë°œí•œë‹¤.

ë¬´íš¨í•œ ìƒíƒœë¥¼ ë²—ì–´ë‚˜ê¸° ìœ„í•´ì„œëŠ” íƒœê·¸ëœ ìœ ë‹ˆì˜¨ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.

## ì•„ì´í…œ 29 ì‚¬ìš©í•  ë•ŒëŠ” ë„ˆê·¸ëŸ½ê²Œ, ìƒì„±í•  ë•ŒëŠ” ì—„ê²©í•˜ê²Œ

---

### ìš”ì•½

- ë³´í†µ ë§¤ê°œë³€ìˆ˜ íƒ€ì…ì€ ë°˜í™˜ íƒ€ì…ì— ë¹„í•´ ë²”ìœ„ê°€ ë„“ì€ ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤. ì„ íƒì  ì†ì„±ê³¼ ìœ ë‹ˆì˜¨ íƒ€ì…ì€ ë°˜í™˜ íƒ€ì…ë³´ë‹¤ ë§¤ê°œë³€ìˆ˜ íƒ€ì…ì— ë” ì¼ë°˜ì ì…ë‹ˆë‹¤.
- ë§¤ê°œë³€ìˆ˜ì™€ ë°˜í™˜ íƒ€ì…ì˜ ì¬ì‚¬ìš©ì„ ìœ„í•´ì„œ ê¸°ë³¸ í˜•íƒœ(ë°˜í™˜ íƒ€ì…)ì™€ ëŠìŠ¨í•œ í˜•íƒœ(ë§¤ê°œë³€ìˆ˜ íƒ€ì…)ë¥¼ ë„ì…í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

---

> ***â€œí•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ëŠ” íƒ€ì…ì˜ ë²”ìœ„ê°€ ë„“ì–´ë„ ë˜ì§€ë§Œ, ê²°ê³¼ë¥¼ ë°˜í™˜í•  ë•ŒëŠ” ì¼ë°˜ì ìœ¼ë¡œ íƒ€ì…ì˜ ë²”ìœ„ê°€ ë” êµ¬ì²´ì ì´ì–´ì•¼ í•œë‹¤.â€***
> 

í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ë•Œ ë§¤ê°œë³€ìˆ˜ íƒ€ì…ì˜ ë²”ìœ„ê°€ ë„“ìœ¼ë©´ ì‚¬ìš©ì´ í¸ë¦¬í•˜ê³ , í•¨ìˆ˜ì˜ ë°˜í™˜ íƒ€ì…ì˜ ë²”ìœ„ê°€ ë„“ì„ìˆ˜ë¡ ì‚¬ìš©ì´ ë¶ˆí¸í•˜ë‹¤. ì¦‰, ì‚¬ìš©í•˜ê¸° í¸ë¦¬í•œ APIì¼ìˆ˜ë¡ ë°˜í™˜ íƒ€ì…ì´ ì—„ê²©í•˜ë‹¤.

### 3D ë§¤í•‘ API

ì¹´ë©”ë¼ì˜ ìœ„ì¹˜ë¥¼ ì§€ì •í•˜ê³  ê²½ê³„ ë°•ìŠ¤ì˜ ë·°í¬íŠ¸ë¥¼ ê³„ì‚°í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•˜ëŠ” APIë¥¼ ê°€ì •í•œë‹¤.

```tsx
interface CameraOptions {
  center?: LngLat;
  zoom?: number;
  bearing?: number;
  pitch?: number;
}

type LngLat =
  { lng: number; lat: number; } |
  { lon: number; lat: number; } |
  [number, number];

type LngLatBounds =
  {northeast: LngLat, southwest: LngLat} |
  [LngLat, LngLat] |
  [number, number, number, number];

declare function setCamera(camera: CameraOptions): void;
declare function viewportForBounds(bounds: LngLatBounds): CameraOptions;
```

- ì¹´ë©”ë¼ ì˜µì…˜ì˜ í•„ë“œëŠ” ì¼ë¶€ ê°’ì€ ê±´ë“œë¦¬ì§€ ì•Šìœ¼ë©´ì„œ ë™ì‹œì— ë‹¤ë¥¸ ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.
- LngLat íƒ€ì…ë„ setCamera í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ ë²”ìœ„ë¥¼ ë„“í˜€ì¤€ë‹¤.
    - ì„œë¡œ ì†ì„± ìˆœì„œê°€ ë‹¤ë¥¸ ê°ì²´, ìˆœì„œëŠ” ë§ëŠ” [lng, lat] ìŒì„ ë„£ì„ ìˆ˜ ìˆë‹¤.
    - í¸ì˜ì„±ì„ ì œê³µí•˜ì—¬ í•¨ìˆ˜ í˜¸ì¶œì„ ì‰½ê²Œ í•  ìˆ˜ ìˆë‹¤.
- LngLatBoundsëŠ” ê²½ê³„ë¥¼ ì§€ì •í•œ íƒ€ì…ì¸ë°, 3ê°€ì§€ íƒ€ì…ì˜ ìœ ë‹ˆì˜¨ìœ¼ë¡œ ì´ 19ê°€ì§€ ì´ìƒì˜ í˜•íƒœë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” ë§¤ìš° ììœ ë¡œìš´ íƒ€ì…ì´ë‹¤.

```tsx
declare function calculateBoundingBox(f: Feature): [number, number, number, number];

function focusOnFeature(f: Feature) {
  const bounds = calculateBoundingBox(f);
  **const camera = viewportForBounds(bounds);
  setCamera(camera);**
  const {center: {lat, lng}, zoom} = camera;
               // ~~~  ... í˜•ì‹ì— 'lat' ì†ì„±ì´ ì—†ìŠµë‹ˆë‹¤.
               // ~~~  ... í˜•ì‹ì— 'lng' ì†ì„±ì´ ì—†ìŠµë‹ˆë‹¤.
  zoom;  // íƒ€ì…ì´ number | undefined
  window.location.search = `?v=@${lat},${lng}z${zoom}`;
}
```

- ì´ ì˜ˆì œì˜ ì˜¤ë¥˜ëŠ” latì™€ lng ì†ì„±ì´ ì—†ê³  zoom ì†ì„±ë§Œ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ë°œìƒí–ˆë‹¤.
- í•˜ì§€ë§Œ, zoomì˜ íƒ€ì…ì´ number | undefinedë¡œ ì¶”ë¡ ë˜ëŠ” ê²ƒë„ ë¬¸ì œë‹¤.
- íƒ€ì… ì„ ì–¸ì´ ì‚¬ìš©ë  ë•Œë¿ë§Œ ì•„ë‹ˆë¼ ë§Œë“¤ì–´ì§ˆ ë•Œì—ë„ ë„ˆë¬´ ììœ ë¡­ë‹¤ëŠ” ê²ƒì´ ë¬¸ì œë‹¤.

> ***â€œcamera ê°’ì„ ì•ˆì „í•œ íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ìœ ì¼í•œ ë°©ë²•ì€ ìœ ë‹ˆì˜¨ íƒ€ì…ì˜ ê° ìš”ì†Œë³„ë¡œ ì½”ë“œë¥¼ ë¶„ê¸°í•˜ëŠ” ê²ƒì´ë‹¤. (ì•„ì´í…œ 22 - íƒ€ì… ì¢íˆê¸°)â€***
> 

ìˆ˜ë§ì€ ì„ íƒì  ì†ì„±ì„ ê°€ì§€ëŠ” ë°˜í™˜ íƒ€ì…ê³¼ ìœ ë‹ˆì˜¨ íƒ€ì…ì€ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ì–´ë µê²Œ ë§Œë“ ë‹¤. ì¢Œí‘œ(lng, lat)ë¥¼ ìœ„í•œ ê¸°ë³¸ í˜•ì‹ì„ êµ¬ë¶„í•˜ëŠ” ê²ƒì´ í•˜ë‚˜ì˜ ë°©ë²•ì´ë‹¤.

ë˜í•œ, setCamera í•¨ìˆ˜ê°€ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì„ ìˆ˜ ìˆë„ë¡, ì™„ì „í•˜ê²Œ ì •ì˜ëœ Camera íƒ€ì…ê³¼ Camera íƒ€ì…ì´ ë¶€ë¶„ì ìœ¼ë¡œ ì •ì˜ëœ ë²„ì „ì„ êµ¬ë¶„í•  ìˆ˜ë„ ìˆë‹¤. (â“)

```tsx
interface LngLat { lng: number; lat: number; };
type LngLatLike = LngLat | { lon: number; lat: number; } | [number, number];

interface Camera {
  center: LngLat;
  zoom: number;
  bearing: number;
  pitch: number;
}
interface CameraOptions extends Omit<Partial<Camera>, 'center'> {
  center?: LngLatLike;
}

type LngLatBounds =
  {northeast: LngLatLike, southwest: LngLatLike} |
  [LngLatLike, LngLatLike] |
  [number, number, number, number];

declare function setCamera(camera: CameraOptions): void;
declare function viewportForBounds(bounds: LngLatBounds): Camera;
```

```tsx
function focusOnFeature(f: Feature) {
  const bounds = calculateBoundingBox(f);
  const camera = viewportForBounds(bounds);
  setCamera(camera);
  const {center: {lat, lng}, zoom} = camera;  // OK
  zoom;  // íƒ€ì…ì€ number
  window.location.search = `?v=@${lat},${lng}z${zoom}`;
}
```

- 

## ì•„ì´í…œ 30 ë¬¸ì„œì— íƒ€ì… ì •ë³´ë¥¼ ì“°ì§€ ì•Šê¸°

---

### ìš”ì•½

- ì£¼ì„ê³¼ ë³€ìˆ˜ëª…ì— íƒ€ì… ì •ë³´ë¥¼ ì ëŠ” ê²ƒì€ í”¼í•´ì•¼ í•©ë‹ˆë‹¤. íƒ€ì… ì„ ì–¸ì´ ì¤‘ë³µë˜ëŠ” ê²ƒìœ¼ë¡œ ëë‚˜ë©´ ë‹¤í–‰ì´ì§€ë§Œ ìµœì•…ì˜ ê²½ìš°ëŠ” íƒ€ì… ì •ë³´ì— ëª¨ìˆœì´ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤.
- íƒ€ì…ì´ ëª…í™•í•˜ì§€ ì•Šì€ ê²½ìš°ëŠ” ë³€ìˆ˜ëª…ì— ë‹¨ìœ„ ì •ë³´ë¥¼ í¬í•¨í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤(ì˜ˆë¥¼ ë“¤ì–´ timeMs ë˜ëŠ” temperatureC).

---

### ì½”ë“œì™€ ì£¼ì„ì˜ ì •ë³´ê°€ ë§ì§€ ì•ŠëŠ” ì½”ë“œ

```tsx
/**
 * ì „ê²½ìƒ‰(foreground) ë¬¸ìì—´ì„ ë°˜í™˜
 * 0ê°œ ë˜ëŠ” 1 ê°œì˜  ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ëŠ”ë‹¤.
 * ë§¤ê°œë³€ìˆ˜ê°€ ì—†ì„ ë•ŒëŠ” í‘œì¤€ ì „ê²½ìƒ‰ì„ ë°˜í™˜
 * ë§¤ê°œë³€ìˆ˜ê°€ ìˆì„ ë•ŒëŠ” íŠ¹ì • í˜ì´ì§€ì˜ ì „ê²½ìƒ‰ì„ ë°˜í™˜
 */
function getForegroundColor(page?: string) {
  return page === 'login' ? {r: 127, g: 127, b: 127} : {r: 0, g: 0, b: 0};
}
```

**ì½”ë“œì™€ ì£¼ì„ì˜ ì •ë³´ê°€ ë§ì§€ ì•ŠëŠ”ë‹¤.**

- ë¬¸ìì—´ì„ ë°˜í™˜í•œë‹¤ê³  ë˜ì–´ ìˆì§€ë§Œ ì‹¤ì œë¡œëŠ” `{ r, g, b }` ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
- ì£¼ì„ì—ëŠ” í•¨ìˆ˜ê°€ 0ê°œ ë˜ëŠ” 1ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ëŠ”ë‹¤ê³  ë˜ì–´ìˆì§€ë§Œ, íƒ€ì… ì‹œê·¸ë‹ˆì²˜ë§Œ ë³´ì•„ë„ ëª…í™•í•˜ê²Œ ì•Œ ìˆ˜ ìˆëŠ” ì •ë³´ì´ë‹¤.
- ë¶ˆí•„ìš”í•˜ê²Œ ì¥í™©í•˜ë‹¤. í•¨ìˆ˜ ì„ ì–¸ê³¼ êµ¬í˜„ì²´ë³´ë‹¤ ì£¼ì„ì´ ë” ê¸¸ë‹¤.

> ***â€œí•¨ìˆ˜ì˜ ì…ë ¥ê³¼ ì¶œë ¥ì˜ íƒ€ì…ì„ ì½”ë“œë¡œ í‘œí˜„í•˜ëŠ” ê²ƒì´ ì£¼ì„ë³´ë‹¤ ë” ë‚˜ì€ ë°©ë²•ì´ë¼ëŠ” ê²ƒì€ ìëª…í•©ë‹ˆë‹¤.â€***
> 

ì´ ì½”ë“œëŠ” ê³¼ê±°ì— ë¬¸ì œì—´ì„ ë°˜í™˜í–ˆì§€ë§Œ ì¶”í›„ì— ê°ì²´ë¥¼ ë°˜í™˜í•˜ë„ë¡ ë°”ë€Œì—ˆê³ , ì£¼ì„ì„ ê°±ì‹ í•˜ëŠ” ê²ƒì„ ê¹œë¹¡í•œ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. ëˆ„êµ°ê°€ ê°•ì œí•˜ì§€ ì•ŠëŠ” ì´ìƒ ì£¼ì„ì€ ì½”ë“œì™€ ë™ê¸°í™”ë˜ì§€ ì•ŠëŠ”ë‹¤. ì£¼ì„ ëŒ€ì‹  íƒ€ì… ì •ë³´ë¥¼ ì½”ë“œë¡œ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì •í™•íˆ ë™ê¸°í™”ë  ìˆ˜ ìˆë‹¤.

### ê°œì„ ëœ ì£¼ì„

```tsx
/** ì• í”Œë¦¬ì¼€ì´ì…˜ ë˜ëŠ” íŠ¹ì • í˜ì´ì§€ì˜ ì „ê²½ìƒ‰ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.. */
function getForegroundColor(page?: string): Color {
  // ...
}
```

íŠ¹ì • ë§¤ê°œë³€ìˆ˜ë¥¼ ì„¤ëª…í•˜ê³  ì‹¶ë‹¤ë©´ JSDocì˜ @param êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì. (ì•„ì´í…œ 48)

ê°’ì„ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤ í˜¹ì€ ë§¤ê°œë³€ìˆ˜ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì£¼ì„ë„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤. ê·¸ ëŒ€ì‹ ì— `**readonly**`ë¡œ ì„ ì–¸í•˜ì—¬ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ê·œì¹™ì„ ê°•ì œí•  ìˆ˜ ìˆë„ë¡ í•˜ì.

```tsx
// Bad
/** numsë¥¼ ë³€ê²½í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. **/
function sort(nums: number[]) { /* ... */ }

// Good
function sort(nums: readonly number[]) { /* ... */ }
```

ì´ëŸ¬í•œ ì£¼ì„ ê·œì¹™ë“¤ì€ ë³€ìˆ˜ëª…ì—ë„ ê·¸ëŒ€ë¡œ ì ìš©í•  ìˆ˜ ìˆë‹¤. ë³€ìˆ˜ëª…ì— íƒ€ì… ì •ë³´ë¥¼ ì ì§€ ì•Šë„ë¡ í•˜ì. ë³€ìˆ˜ëª…ì„ `ageNum`ìœ¼ë¡œ ì§“ëŠ” ê²ƒë³´ë‹¤ëŠ” `age`ë¡œ í•˜ê³  ê·¸ **íƒ€ì…ì´ `number`ì„ì„ ëª…ì‹œí•˜ëŠ” ê²ƒ**ì´ ì¢‹ë‹¤.

ğŸ“Œ ê·¸ëŸ¬ë‚˜, **ë‹¨ìœ„ê°€ ìˆëŠ” ìˆ«ìë“¤ì€ ì˜ˆì™¸** (ì•„ì´í…œ 37ì—ì„œ ë” ìì„¸íˆ ì„¤ëª…)

- `timeMs`ëŠ” `time`ë³´ë‹¤ í›¨ì”¬ ëª…í™•í•˜ë‹¤.
- `temperatureC`ëŠ” `temperature`ë³´ë‹¤ í›¨ì”¬ ëª…í™•í•˜ë‹¤.
    
    ì´ëŸ´ ë•ŒëŠ” íƒ€ì… ì •ë³´ë¥¼ ë³€ìˆ˜ëª…ì— ì ìš©í•´ë„ ì¢‹ë‹¤.
    

## ì•„ì´í…œ 31 íƒ€ì… ì£¼ë³€ì— null ê°’ ë°°ì¹˜í•˜ê¸°

---

### ìš”ì•½

- í•œ ê°’ì˜ null ì—¬ë¶€ê°€ ë‹¤ë¥¸ ê°’ì˜ null ì—¬ë¶€ì— ì•”ì‹œì ìœ¼ë¡œ ê´€ë ¨ë˜ë„ë¡ ì„¤ê³„í•˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.
- API ì‘ì„± ì‹œì—ëŠ” ë°˜í™˜ íƒ€ì…ì„ í° ê°ì²´ë¡œ ë§Œë“¤ê³  ë°˜í™˜ íƒ€ì… ì „ì²´ê°€ nullì´ê±°ë‚˜ nullì´ ì•„ë‹ˆê²Œ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤. ì‚¬ëŒê³¼ íƒ€ì… ì²´ì»¤ ëª¨ë‘ì—ê²Œ ëª…ë£Œí•œ ì½”ë“œê°€ ë  ê²ƒì…ë‹ˆë‹¤.
- í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ ë•ŒëŠ” í•„ìš”í•œ ëª¨ë“  ê°’ì´ ì¤€ë¹„ë˜ì—ˆì„ ë•Œ ìƒì„±í•˜ì—¬ nullì´ ì¡´ì¬í•˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
- strictNullChecksë¥¼ ì„¤ì •í•˜ë©´ ì½”ë“œì— ë§ì€ ì˜¤ë¥˜ê°€ í‘œì‹œë˜ê² ì§€ë§Œ, null ê°’ê³¼ ê´€ë ¨ëœ ë¬¸ì œì ì„ ì°¾ì•„ë‚¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤.

---

> ğŸ™„ null íƒ€ì…ì„ ì–¸ì œ, ì–´ë–»ê²Œ ë°°ì¹˜í• ê¹Œ? ì— ëŒ€í•œ ì•„ì´í…œì¸ ë“¯.
> 

strictNullChecks ì„¤ì •ì„ ì¼°ì„ ë•Œë¥¼ ê°€ì •í•œë‹¤.

### ìˆ«ìë“¤ì˜ ìµœì†Ÿê°’ê³¼ ìµœëŒ“ê°’ ê³„ì‚°í•˜ëŠ” ì½”ë“œ

**undefinedë¥¼ í¬í•¨í•˜ëŠ” ê°ì²´ëŠ” ë‹¤ë£¨ê¸° ì–´ë µê³  ì ˆëŒ€ ê¶Œì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.**

```tsx
**// Bad**
function extent1(nums: number[]) {
  let min, max;

  for (const num of nums) {
    if (!min) { // 0ì¼ ê²½ìš°?
      min = num;
      max = num;
    } else { 
      min = Math.min(min, num);
      max = Math.max(max, num);
         // ~~~ 'number | undefined' íƒ€ì…ì„ number íƒ€ì…ì— í• ë‹¹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
    }
  }
}
```

- ìµœì†Ÿê°’ì´ë‚˜ ìµœëŒ“ê°’ì´ 0ì¸ ê²½ìš°, ê°’ì´ ë§ì”Œì›Œì ¸ ë²„ë¦°ë‹¤.
- ë§¤ê°œë³€ìˆ˜ `nums`ê°€ ë¹ˆ ë°°ì—´ì´ë©´ `[undefined, undefined]` ê°€ ë°˜í™˜ ë  ê²ƒì´ê³ , ë°°ì—´ì˜ ìµœì†Ÿê°’ì´ `0`ì´ë¼ë©´ `0ì´ ì•„ë‹Œ ê°’`ì„ ìµœì†Ÿê°’ìœ¼ë¡œ ë°˜í™˜í•  ê²ƒì´ë‹¤.

```tsx
**// Good**
function extent2(nums: number[]) {
  let result: [number, number] | null = null; // ì—°ê´€ìˆëŠ” ê°’ì„ ë¬¶ì–´ null ë°°ì¹˜

  for(const num of nums) {
    if (!result) {
      result = [num, num];
    } else {
      result = [ Math.min(num, result[0]), Math.max(num, result[1]) ];
    }
  return result;
}
```

- minê³¼ maxë¥¼ í•œ ê°ì²´ ì•ˆì— ë„£ê³  nullì´ê±°ë‚˜ nullì´ ì•„ë‹ˆê²Œ í•˜ë©´ ëœë‹¤.
    - ë§¤ê°œë³€ìˆ˜ **`nums`**ê°€ ë¹ˆ ë°°ì—´ì´ë©´ **`null`**ì´ ë°˜í™˜ ë  ê²ƒì´ê³  ì´ëŠ” ifë¬¸ìœ¼ë¡œ `null`ì„ ì²´í¬í•  ìˆ˜ ìˆë‹¤.
    - ë°˜í™˜ íƒ€ì…ì´ `[number, number] | null`ì´ ë˜ì–´ì„œ ì‚¬ìš©í•˜ê¸° ë” ìˆ˜ì›”í•´ì§„ë‹¤.
    - non-null ë‹¨ì–¸(!)ì„ ì‚¬ìš©í•˜ë©´ minê³¼ maxë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.
        
        ```tsx
        const [min, max] = extent([0,1,2])!;
        const span = max - min; // ì •ìƒ
        ```
        

### `null`ê³¼ `null`ì´ ì•„ë‹Œ ê°’ì„ ì„ì–´ ì‚¬ìš©í•˜ì§€ ë§ì (í´ë˜ìŠ¤)

ì‚¬ìš©ìì™€ ê·¸ ì‚¬ìš©ìì˜ í¬ëŸ¼ ê²Œì‹œê¸€ì„ ë‚˜íƒ€ë‚´ëŠ” í´ë˜ìŠ¤ë¥¼ ê°€ì •í•œë‹¤.

```tsx
class UserPosts {
  user: UserInfo | null;
  posts: Post[] | null;

  constructor() {
    this.user = null;
    this.posts = null;
  }

  async init(userId: string) {
    return Promise.all([
      async () => this.user = await fetchUser(userId),
      async () => this.posts = await fetchPostsForUser(userId)
    ]);
  }

  getUserName() {
    // ...?
  }
}
```

- `init`ë  ê²½ìš° userì™€ posts ì†ì„±ì€ 1)ë‘˜ ë‹¤ nullì´ê±°ë‚˜, 2,3)ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ nullì´ê±°ë‚˜ 4)ë‘˜ ë‹¤ nullì´ ì•„ë‹ ê²ƒìœ¼ë¡œ ì´ 4ê°€ì§€ ê²½ìš°ê°€ ì¡´ì¬í•œë‹¤.
- ì†ì„± ê°’ì˜ ë¶ˆí™•ì‹¤ì„±ì´ í´ë˜ìŠ¤ì˜ ëª¨ë“  ë©”ì„œë“œì— ë‚˜ìœ ì˜í–¥ì„ ë¯¸ì¹˜ê²Œ ëœë‹¤.
    - null ì²´í¬ê°€ ë‚œë¬´
    - ë²„ê·¸ ì–‘ì‚°
- ê°œì„ í•´ë³´ì.

### ê°œì„ 

```tsx
class UserPosts {
  user: UserInfo;
  posts: Post[];

  constructor(user: UserInfo, posts: Post[]) {
    this.user = user;
    this.posts = posts;
  }

  static async init(userId: string): Promise<UserPosts> {
    const [user, posts] = await Promise.all([
      fetchUser(userId),
      fetchPostsForUser(userId)
    ]);
    return new UserPosts(user, posts);
  }

  getUserName() {
    return this.user.name;
  }
}
```

- í´ë˜ìŠ¤ê°€ ì™„ì „íˆ nullì´ ì•„ë‹ˆê²Œ ë˜ì—ˆê³ , ë©”ì„œë“œ ì‘ì„±ì´ ì‰¬ì›Œì¡Œë‹¤.
- ì„¤ê³„ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ì„œ í•„ìš”í•œ ë°ì´í„°ê°€ ëª¨ë‘ ì¤€ë¹„ëœ í›„ì— í´ë˜ìŠ¤ë¥¼ ì‘ì„±í–ˆë‹¤ê³  ê°€ì •í•¨.
- ì´ì œëŠ” `init`í•  ê²½ìš° ëª¨ë“  ë°ì´í„°ë¥¼ ë°›ì•„ì˜¨ í›„ì— ê°ì²´ê°€ ìƒì„±ëœë‹¤.

## ì•„ì´í…œ 32 ìœ ë‹ˆì˜¨ì˜ ì¸í„°í˜ì´ìŠ¤ë³´ë‹¤ëŠ” ì¸í„°í˜ì´ìŠ¤ì˜ ìœ ë‹ˆì˜¨ì„ ì‚¬ìš©í•˜ê¸°

---

### ìš”ì•½

- ìœ ë‹ˆì˜¨ íƒ€ì…ì˜ ì†ì„±ì„ ì—¬ëŸ¬ ê°œ ê°€ì§€ëŠ” ì¸í„°í˜ì´ìŠ¤ì—ì„œëŠ” ì†ì„± ê°„ì˜ ê´€ê³„ê°€ ë¶„ëª…í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì‹¤ìˆ˜ê°€ ìì£¼ ë°œìƒí•˜ë¯€ë¡œ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤.
- ìœ ë‹ˆì˜¨ì˜ ì¸í„°í˜ì´ìŠ¤ë³´ë‹¤ ì¸í„°í˜ì´ìŠ¤ì˜ ìœ ë‹ˆì˜¨ì´ ë” ì •í™•í•˜ê³  íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ì´í•´í•˜ê¸°ë„ ì¢‹ìŠµë‹ˆë‹¤.
- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ì œì–´ íë¦„ì„ ë¶„ì„í•  ìˆ˜ ìˆë„ë¡ íƒ€ì…ì— íƒœê·¸ë¥¼ ë„£ëŠ” ê²ƒì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤. íƒœê·¸ëœ ìœ ë‹ˆì˜¨ì€ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì™€ ë§¤ìš° ì˜ ë§ê¸° ë•Œë¬¸ì— ìì£¼ ë³¼ ìˆ˜ ìˆëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.

---

### ì¸í„°í˜ì´ìŠ¤ì˜ ìœ ë‹ˆì˜¨ ì‚¬ìš©í•˜ê¸°

ë²¡í„°ë¥¼ ê·¸ë¦¬ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„± ì¤‘ì´ê³ , íŠ¹ì •í•œ ê¸°í•˜í•™ì  íƒ€ì…ì„ ê°€ì§€ëŠ” ê³„ì¸µì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•œë‹¤ê³  ê°€ì •í•œë‹¤.

```tsx
// ì˜ëª»ëœ ì„¤ê³„
interface Layer {
  layout: FillLayout | LineLayout | PointLayout;
  paint: FillPaint | LinePaint | PointPaint;
}
```

- `layout`ì´ â€˜LineLayout(ì§ì„  ë ˆì´ì•„ì›ƒ)â€™ì¸ë°, `paint`ê°€ â€˜FillPaint(ì±„ìš°ê¸°)â€™ì¸ ê²ƒì€ ë§ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.
- ì´ëŸ¬í•œ ì¡°í•©ì„ í—ˆìš©í•´ì„œëŠ” ì•ˆë˜ê³ , ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ê¸° ì‹­ìƒì´ë‹¤.

**ê°ê° íƒ€ì…ì˜ ê³„ì¸µì„ ë¶„ë¦¬ëœ ì¸í„°í˜ì´ìŠ¤ë¡œ ë‘ì–´ì•¼ í•œë‹¤.**

```tsx
// íƒ€ì…ì˜ ê³„ì¸µì„ ë¶„ë¦¬
interface FillLayer {
  type: 'fill';
  layout: FillLayout;
  paint: FillPaint;
}
interface LineLayer {
  type: 'line';
  layout: LineLayout;
  paint: LinePaint;
}
interface PointLayer {
  type: 'paint';
  layout: PointLayout;
  paint: PointPaint;
}

type Layer = FillLayer | LineLayer | PointLayer;
```

- ì´ì œ ì†ì„±ë“¤ì´ ì˜ëª»ëœ ì¡°í•©ìœ¼ë¡œ ì„ì´ëŠ” ê²½ìš°ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.
- ì´ ì½”ë“œëŠ” ì•„ì´í…œ28ì˜ â€˜ìœ íš¨í•œ ìƒíƒœâ€™ë§Œì„ í‘œí˜„í•˜ë„ë¡ ì •ì˜ë˜ì—ˆë‹¤.
- `type`ì„ ì‹ë³„ìë¡œ íƒœê·¸ëœ ìœ ë‹ˆì˜¨ì„ ì‚¬ìš©í–ˆë‹¤.

**ë²”ìœ„ë¥¼ ì¢í˜€ì„œ ì‚¬ìš©í•˜ëŠ” ë²•**

```tsx
function drawLayer(layer: Layer) {
  if (layer.type === 'fill') {
    const {paint} = layer;  // íƒ€ì…ì´ FillPaint
    const {layout} = layer;  // íƒ€ì…ì´ FillLayout
  } else if (layer.type === 'line') {
    const {paint} = layer;  // íƒ€ì…ì´ LinePaint
    const {layout} = layer;  // íƒ€ì…ì´ LineLayout
  } else {
    const {paint} = layer;  // íƒ€ì…ì´ PointPaint
    const {layout} = layer;  // íƒ€ì…ì´ PointLayout
  }
}
```

### íƒœê·¸ëœ ìœ ë‹ˆì˜¨ íŒ¨í„´ ì˜ ì‚¬ìš©í•˜ê¸°

- ì–´ë–¤ ë°ì´í„° íƒ€ì…ì„ íƒœê·¸ëœ ìœ ë‹ˆì˜¨ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤ë©´ â‡’ ë³´í†µì€ ê·¸ë ‡ê²Œ í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
- ë˜ëŠ” ì—¬ëŸ¬ ê°œì˜ ì„ íƒì  í•„ë“œê°€ ë™ì‹œì— ê°’ì´ ìˆê±°ë‚˜ ë™ì‹œì— undefinedì¸ ê²½ìš°ë„ íƒœê·¸ëœ ìœ ë‹ˆì˜¨ íŒ¨í„´ì´ ì˜ ë§ëŠ”ë‹¤.

```tsx
interface Person {
  name: string;
  // ë‹¤ìŒì€ ë‘˜ ë‹¤ ë™ì‹œì— ìˆê±°ë‚˜ ë™ì‹œì— ì—†ìŠµë‹ˆë‹¤.
  placeOfBirth?: string;
  dateOfBirth?: Date;
}
```

- íƒ€ì… ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” ì£¼ì„ì€ ë¬¸ì œë  ì†Œì§€ê°€ ë§¤ìš° ë†’ë‹¤.
- placeOfBirthì™€ dateOfBirth í•„ë“œëŠ” ì‹¤ì œë¡œ ê´€ë ¨ë˜ì–´ ìˆì§€ë§Œ, íƒ€ì… ì •ë³´ì—ëŠ” ì–´ë– í•œ ê´€ê³„ë„ í‘œí˜„ë˜ì§€ ì•Šê³  ìˆë‹¤.
- ë‘ ê°œì˜ ì†ì„±ì„ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ëª¨ìœ¼ëŠ” ê²ƒì´ ë” ë‚˜ì€ ì„¤ê³„ë‹¤. ì´ ë°©ë²•ì€ ì•„ì´í…œ 31 null ê°’ì„ ê²½ê³„ë¡œ ë‘ëŠ” ë°©ë²•ê³¼ ë¹„ìŠ·í•˜ë‹¤.

```tsx
interface Person {
  name: string;
  birth?: {
    place: string;
    date: Date;
  }
}
```

- ê·¸ëŸ°ë° ì´ì œ **placeë§Œ ìˆê³  dateê°€ ì—†ëŠ” ê²½ìš°** ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤. (ë‘˜ ë‹¤ ìˆì–´ì•¼ ë˜ë„ë¡ í•¨)
    
    ```tsx
    const alanT: Person = {
      name: 'Alan Turing',
      birth: {
    // ~~~~ 'date' ì†ì„±ì´ '{ place: string; }' í˜•ì‹ì— ì—†ì§€ë§Œ
    //      '{ place: string; date: Date; }' í˜•ì‹ì—ì„œ í•„ìˆ˜ì…ë‹ˆë‹¤.
    	  place: 'London'
    	}
    }
    ```
    
    - Person ê°ì²´ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ëŠ” í•¨ìˆ˜ëŠ” `birth` í•˜ë‚˜ë§Œ ì²´í¬í•˜ë©´ ëœë‹¤.

### íƒ€ì… êµ¬ì¡°ë¥¼ ì† ëŒˆ ìˆ˜ ì—†ëŠ” ìƒí™© (ex. API ê²°ê³¼ ë“±)

ì´ëŸ° ìƒí™©ì´ë©´ ì•ì„œ ì„¤ëª…í•œ **ì¸í„°í˜ì´ìŠ¤ì˜ ìœ ë‹ˆì˜¨**ì„ ì‚¬ìš©í•´ì„œ ì†ì„± ì‚¬ì´ì˜ ê´€ê³„ë¥¼ ëª¨ë¸ë§í•  ìˆ˜ ìˆë‹¤.

```tsx
interface Name {
  name: string;
}

interface PersonWithBirth extends Name {
  placeOfBirth: string;
  dateOfBirth: Date;
}

type Person = Name | PersonWithBirth;
```

## ì•„ì´í…œ 33 string íƒ€ì…ë³´ë‹¤ ë” êµ¬ì²´ì ì¸ íƒ€ì… ì‚¬ìš©í•˜ê¸°

---

### ìš”ì•½

- â€˜ë¬¸ìì—´ì„ ë‚¨ë°œí•˜ì—¬ ì„ ì–¸ëœâ€™ ì½”ë“œë¥¼ í”¼í•©ì‹œë‹¤. ëª¨ë“  ë¬¸ìì—´ì„ í• ë‹¹í•  ìˆ˜ ìˆëŠ” string íƒ€ì…ë³´ë‹¤ëŠ” ë” êµ¬ì²´ì ì¸ íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
- ë³€ìˆ˜ì˜ ë²”ìœ„ë¥¼ ë³´ë‹¤ ì •í™•í•˜ê²Œ í‘œí˜„í•˜ê³  ì‹¶ë‹¤ë©´ string íƒ€ì…ë³´ë‹¤ëŠ” ë¬¸ìì—´ ë¦¬í„°ëŸ´ íƒ€ì…ì˜ ìœ ë‹ˆì˜¨ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. íƒ€ì… ì²´í¬ë¥¼ ë” ì—„ê²©íˆ í•  ìˆ˜ ìˆê³  ìƒì‚°ì„±ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ê°ì²´ì˜ ì†ì„± ì´ë¦„ì„ í•¨ìˆ˜ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì„ ë•ŒëŠ” stringë³´ë‹¤ keyof Të¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

---

### ë‚¨ë°œëœ string íƒ€ì…

```tsx
interface Album {
  artist: string;
  title: string;
  releaseDate: string;  // YYYY-MM-DD
  recordingType: string;  // ì˜ˆë¥¼ ë“¤ì–´, "live" ë˜ëŠ” "studio"
}

// ì—‰ëš±í•œ ê°’ì´ ë“¤ì–´ì˜¬ ìˆ˜ ìˆë‹¤.
const kindOfBlue: Album = {
  artist: 'Miles Davis',
  title: 'Kind of Blue',
  releaseDate: 'August 17th, 1959',  // ë‚ ì§œ í˜•ì‹ì´ ë‹¤ë¦…ë‹ˆë‹¤.
  recordingType: 'Studio',  // ì˜¤íƒ€ (ëŒ€ë¬¸ì S)
};  // ì •ìƒ ì·¨ê¸‰í•¨

function recordRelease(title: string, date: string) { /* ... */ }
recordRelease(kindOfBlue.releaseDate, kindOfBlue.title);  // ì˜¤ë¥˜ì—¬ì•¼ í•˜ì§€ë§Œ ì •ìƒ
```

- ì´ ì˜ˆì œì²˜ëŸ¼ stringì´ ë‚¨ìš©ëœ ì½”ë“œë¥¼ â€œstringly typedâ€ë¼ê³  í‘œí˜„í•˜ê¸°ë„ í•œë‹¤.
- releaseDate í•„ë“œëŠ” Date ê°ì²´ë¥¼ ì‚¬ìš©í•´ì„œ ì œí•œí•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
- recordingType í•„ë“œëŠ” â€œliveâ€ | â€œstudioâ€ ë‘ ê°œì˜ ê°’ìœ¼ë¡œ ìœ ë‹ˆì˜¨ íƒ€ì…ì„ ì •ì˜í•˜ì.

**ê°œì„ **

```tsx
/** ì´ ë…¹ìŒì€ ì–´ë–¤ í™˜ê²½ì—ì„œ ì´ë£¨ì–´ì¡ŒëŠ”ì§€? **/
type RecordingType = 'studio' | 'live';

interface Album {
  artist: string;
  title: string;
  releaseDate: Date;
  recordingType: RecordingType;
}

// ì‚¬ìš©
function getAlbumsOfType(recordingType: RecordingType): Album[] {
	// ... 
}
```

ì´ëŸ¬í•œ ë°©ì‹ì˜ ì¥ì 

1. íƒ€ì…ì„ ëª…ì‹œì ìœ¼ë¡œ ì •ì˜í•¨ìœ¼ë¡œì¨ ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ê°’ì´ ì „ë‹¬ë˜ì–´ë„ íƒ€ì… ì •ë³´ê°€ ìœ ì§€ëœë‹¤.
2. íƒ€ì…ì„ ëª…ì‹œì ìœ¼ë¡œ ì •ì˜í•˜ê³  í•´ë‹¹ íƒ€ì…ì˜ ì˜ë¯¸ë¥¼ ì„¤ëª…í•˜ëŠ” ì£¼ì„ì„ ë¶™ì—¬ ë„£ì„ ìˆ˜ ìˆë‹¤.
3. keyof ì—°ì‚°ìë¡œ ë”ìš± ì„¸ë°€í•˜ê²Œ ê°ì²´ ì†ì„± ì²´í¬ê°€ ê°€ëŠ¥í•´ì§„ë‹¤.

### ê°ì²´ ì†ì„± ì´ë¦„ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì„ ë•ŒëŠ” stringë³´ë‹¤ keyof T (â“â“â“)

ì–´ë–¤ ë°°ì—´ì—ì„œ í•œ í•„ë“œì˜ ê°’ë§Œ ì¶”ì¶œí•˜ëŠ” í•¨ìˆ˜ë¥¼ ì‘ì„±í•œë‹¤ê³  ê°€ì •í•œë‹¤.

```tsx
function pluck(records, key) {
	return records.map(r => r[key]);
}
```

```tsx
// pluck í•¨ìˆ˜ì˜ ì‹œê·¸ë‹ˆì²˜ë¥¼ ì•„ë˜ì™€ ê°™ì´ ì‘ì„± ê°€ëŠ¥
function pluck(record: any[], key: string): any[] {
  return record.map(r => r[key]);
}
```

- íƒ€ì… ì²´í¬ëŠ” ì´ë£¨ì–´ì§€ì§€ë§Œ any íƒ€ì…ì´ ìˆì–´ ì •ë°€í•˜ì§€ ëª»í•˜ë‹¤.
- ë°˜í™˜ ê°’ì— anyê°€ ë“¤ì–´ê°€ëŠ” ê²ƒì€ ë§¤ìš° ì¢‹ì§€ ëª»í•œ ì„¤ê³„ì´ë‹¤.

**ê°œì„ **

```tsx
function pluck<T, K extends keyof T>(record: T[], key: K): T[K][] {
  return record.map(r => r[key]);
}
```

- ì œë„¤ë¦­ íƒ€ì…ì„ ë„ì…
- T : ë§¤ê°œë³€ìˆ˜ì¸ ë°°ì—´ì˜ ìš”ì†Œ íƒ€ì…
- K : íƒ€ì… Tì˜ keyë¥¼ ë½‘ì•„ë‚¸ íƒ€ì…ì„ ìƒì†ë°›ëŠ” íƒ€ì…ìœ¼ë¡œ, ì¶”ì¶œí•˜ê³ ì í•˜ëŠ” í•„ë“œì˜ íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©

## ì•„ì´í…œ 34 ë¶€ì •í™•í•œ íƒ€ì…ë³´ë‹¤ëŠ” ë¯¸ì™„ì„± íƒ€ì…ì„ ì‚¬ìš©í•˜ê¸°

---

### ìš”ì•½

- íƒ€ì… ì•ˆì •ì„±ì—ì„œ ë¶ˆì¾Œí•œ ê³¨ì§œê¸°ëŠ” í”¼í•´ì•¼ í•©ë‹ˆë‹¤. íƒ€ì…ì´ ì—†ëŠ” ê²ƒë³´ë‹¤ ì˜ëª»ëœ ê²Œ ë” ë‚˜ì©ë‹ˆë‹¤.
- ì •í™•í•˜ê²Œ íƒ€ì…ì„ ëª¨ë¸ë§í•  ìˆ˜ ì—†ë‹¤ë©´, ë¶€ì •í™•í•˜ê²Œ ëª¨ë¸ë§í•˜ì§€ ë§ì•„ì•¼ í•©ë‹ˆë‹¤. ë˜í•œ anyì™€ unknownì„ êµ¬ë³„í•´ì„œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
- íƒ€ì… ì •ë³´ë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ë§Œë“¤ìˆ˜ë¡ ì˜¤ë¥˜ ë©”ì‹œì§€ì™€ ìë™ ì™„ì„± ê¸°ëŠ¥ì— ì£¼ì˜ë¥¼ ê¸°ìš¸ì—¬ì•¼ í•©ë‹ˆë‹¤. ì •í™•ë„ë¿ë§Œ ì•„ë‹ˆë¼ ê°œë°œ ê²½í—˜ê³¼ë„ ê´€ë ¨ë©ë‹ˆë‹¤.

---

íƒ€ì… ì •ë³´ê°€ ì •ë°€í•´ì¡Œë‹¤ê³  ê²°ê³¼ì ìœ¼ë¡œ ì´ì „ ë²„ì „ë³´ë‹¤ ê°œì„ ë˜ì—ˆë‹¤ê³  ë³¼ ìˆ˜ëŠ” ì—†ë‹¤. ì˜ëª» ì‚¬ìš©ëœ ì½”ë“œì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ê¸°ëŠ” í•˜ì§€ë§Œ ì—ëŸ¬ ë©”ì‹œì§€ëŠ” ë” ë‚œí•´í•´ì§ˆ ìˆ˜ë„ ìˆë‹¤. íƒ€ì… ì„ ì–¸ì˜ ë³µì¡ì„±ìœ¼ë¡œ ì¸í•´ ë²„ê·¸ê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ë„ ë†’ì•„ì§ˆ ìˆ˜ ìˆë‹¤.

íƒ€ì…ì„ ì •ì œ(refine)í•  ë•Œ, ë¶ˆì¾Œí•œ ê³¨ì§œê¸°(uncanny valley) ì€ìœ ë¥¼ ìƒê°í•´ë³´ë©´ ë„ì›€ì´ ë  ìˆ˜ ìˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ any ê°™ì€ ë§¤ìš° ì¶”ìƒì ì¸ íƒ€ì…ì€ ì •ì œí•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ê·¸ëŸ¬ë‚˜ íƒ€ì…ì´ êµ¬ì²´ì ìœ¼ë¡œ ì •ì œëœë‹¤ê³  í•´ì„œ ì •í™•ë„ê°€ ë¬´ì¡°ê±´ ì˜¬ë¼ê°€ëŠ” ê²ƒì€ ì•„ë‹ˆë¼ëŠ” ê²ƒì„ ê¸°ì–µí•´ì•¼ í•œë‹¤.

íƒ€ì…ì— ì˜ì¡´í•˜ê¸° ì‹œì‘í•˜ë©´ ë¶€ì •í™•í•¨ìœ¼ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ë¬¸ì œëŠ” ë” ì»¤ì§ˆ ìˆ˜ ìˆë‹¤.

> ì–´ì„¤í”„ê²Œ ì™„ë²½ì„ ì¶”êµ¬í•˜ë ¤ë‹¤ê°€ ì˜¤íˆë ¤ ì—­íš¨ê³¼ê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ ì£¼ì˜í•˜ìëŠ” ì˜ë„
> 

## ì•„ì´í…œ 35 ë°ì´í„°ê°€ ì•„ë‹Œ, APIì™€ ëª…ì„¸ë¥¼ ë³´ê³  íƒ€ì… ë§Œë“¤ê¸°

---

### ìš”ì•½

- ì½”ë“œì˜ êµ¬ì„ êµ¬ì„ê¹Œì§€ íƒ€ì… ì•ˆì •ì„±ì„ ì–»ê¸° ìœ„í•´ API ë˜ëŠ” ë°ì´í„° í˜•ì‹ì— ëŒ€í•œ íƒ€ì… ìƒì„±ì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.
- ë°ì´í„°ì— ë“œëŸ¬ë‚˜ì§€ ì•ŠëŠ” ì˜ˆì™¸ì ì¸ ê²½ìš°ë“¤ì´ ë¬¸ì œê°€ ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë°ì´í„°ë³´ë‹¤ëŠ” ëª…ì„¸ë¡œë¶€í„° ì½”ë“œë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

---

íŒŒì¼ í˜•ì‹, API, ëª…ì„¸(specification) ë“± ìš°ë¦¬ê°€ ë‹¤ë£¨ëŠ” íƒ€ì… ì¤‘ ìµœì†Œí•œ ëª‡ ê°œëŠ” í”„ë¡œì íŠ¸ ì™¸ë¶€ì—ì„œ ë¹„ë¡¯ëœ ê²ƒì´ë‹¤. ì´ëŸ¬í•œ ê²½ìš° íƒ€ì…ì„ ì§ì ‘ ì‘ì„±í•˜ì§€ ì•Šê³  ìë™ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì„œ í•µì‹¬ì€ ì˜ˆì‹œ **ë°ì´í„°ê°€ ì•„ë‹ˆë¼ ëª…ì„¸ë¥¼ ì°¸ê³ í•´ íƒ€ì…ì„ ìƒì„±**í•œë‹¤ëŠ” ê²ƒì´ë‹¤.

- ê·¸ëŸ°ë° ë§Œì•½ ëª…ì„¸ ì •ë³´ë‚˜ ê³µì‹ ìŠ¤í‚¤ë§ˆê°€ ì—†ë‹¤ë©´ ë°ì´í„°ë¡œë¶€í„° íƒ€ì…ì„ ìƒì„±í•´ì•¼ í•œë‹¤.
    - ì´ë¥¼ ìœ„í•´ quicktype ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
    - ì¼ì¹˜í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒ, ì˜ˆì™¸ê°€ ìˆì„ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì— í•­ìƒ ì£¼ì˜
- **ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° íƒ€ì…ì„ ì§ì ‘ ì‘ì„±í•˜ì§€ ë§ê³ , ëª…ì„¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±í•˜ë¼.**

## ì•„ì´í…œ 36 í•´ë‹¹ ë¶„ì•¼ì˜ ìš©ì–´ë¡œ íƒ€ì… ì´ë¦„ ì§“ê¸°

---

### ìš”ì•½

- ê°€ë…ì„±ì„ ë†’ì´ê³ , ì¶”ìƒí™” ìˆ˜ì¤€ì„ ì˜¬ë¦¬ê¸° ìœ„í•´ì„œ í•´ë‹¹ ë¶„ì•¼ì˜ ìš©ì–´ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
- ê°™ì€ ì˜ë¯¸ì— ë‹¤ë¥¸ ì´ë¦„ì„ ë¶™ì´ë©´ ì•ˆë©ë‹ˆë‹¤. íŠ¹ë³„í•œ ì˜ë¯¸ê°€ ìˆì„ ë•Œë§Œ ìš©ì–´ë¥¼ êµ¬ë¶„í•´ì•¼ í•©ë‹ˆë‹¤.

---

> ğŸ™„ ë§¤ë²ˆ ì´ë¦„ ì§“ê¸° ê´€ë ¨ ì–˜ê¸°ê°€ ë‚˜ì˜¤ëŠ” ê±¸ ë³´ë‹ˆ ì§„ì§œ ì–´ë ¤ìš´ê°€ ë³´ë‹¤â€¦
> 

### ì£¼ì˜í•  ì 

- ë™ì¼í•œ ì˜ë¯¸ë¥¼ ë‚˜íƒ€ë‚¼ ë•ŒëŠ” ê°™ì€ ìš©ì–´ë¥¼ ì‚¬ìš©í•  ê²ƒ
- `data`, `info`, `thing`, `item`, `object`, `entity`ì™€ ê°™ì´ ëª¨í˜¸í•˜ê³  ì˜ë¯¸ì—†ëŠ” ì´ë¦„ í”¼í•  ê²ƒ
    - í•´ë‹¹ ë¶„ì•¼ì—ì„œ íŠ¹ë³„í•œ ì˜ë¯¸ë¥¼ ê°€ì§„ë‹¤ë©´ ê´œì°®ìŒ
- ì´ë¦„ì„ ì§€ì„ ë•ŒëŠ” í¬í•¨ëœ ë‚´ìš©ì´ë‚˜ ê³„ì‚° ë°©ì‹ì´ ì•„ë‹ˆë¼ ë°ì´í„° ìì²´ê°€ ë¬´ì—‡ì¸ì§€ ê³ ë ¤í•  ê²ƒ
    - `INodeList`ë³´ë‹¤ëŠ” `Directory`ê°€ ë” ì˜ë¯¸ìˆëŠ” ì´ë¦„ì´ë‹¤.
    - ì¢‹ì€ ì´ë¦„ì€ ì¶”ìƒí™”ì˜ ìˆ˜ì¤€ì„ ë†’ì´ê³  ì˜ë„ì¹˜ì•Šì€ ì¶©ëŒì˜ ìœ„í—˜ì„±ì„ ì¤„ì—¬ ì¤€ë‹¤.
- ìì²´ì ìœ¼ë¡œ ìš©ì–´ë¥¼ ë§Œë“¤ì–´ ë‚´ë ¤ê³  í•˜ì§€ ë§ê³ , í•´ë‹¹ ë¶„ì•¼ì— ìˆëŠ” ìš©ì–´ë¥¼ ì‚¬ìš©í•  ê²ƒ

## ì•„ì´í…œ 37 ê³µì‹ ëª…ì¹­ì—ëŠ” ìƒí‘œë¥¼ ë¶™ì´ê¸°

---

### ìš”ì•½

- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” êµ¬ì¡°ì  íƒ€ì´í•‘ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—, ê°’ì„ ì„¸ë°€í•˜ê²Œ êµ¬ë¶„í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ê°’ì„ êµ¬ë¶„í•˜ê¸° ìœ„í•´ ê³µì‹ ëª…ì¹­ì´ í•„ìš”í•˜ë‹¤ë©´ ìƒí‘œë¥¼ ë¶™ì´ëŠ” ê²ƒì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.
- ìƒí‘œ ê¸°ë²•ì€ íƒ€ì… ì‹œìŠ¤í…œì—ì„œ ë™ì‘í•˜ì§€ë§Œ ëŸ°íƒ€ì„ì— ìƒí‘œë¥¼ ê²€ì‚¬í•˜ëŠ” ê²ƒê³¼ ë™ì¼í•œ íš¨ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

### ìƒí‘œ ê¸°ë²•

```tsx
interface Vector2D {
  x: number;
  y: number;
}
function calculateNorm(p: Vector2D) {
  return Math.sqrt(p.x * p.x + p.y * p.y);
}
calculateNorm({x: 3, y: 4}); 
calculateNorm({x: 3, y: 4, z: 1});
```

- calculateNormì€ 2ì°¨ì›ë§Œ ë°›ì•„ì˜¤ëŠ” í•¨ìˆ˜ì´ë¯€ë¡œ, 3ì°¨ì› ë²¡í„°ë¥¼ í—ˆìš©í•˜ë©´ ì•ˆëœë‹¤.
- ì´ ë•Œ, ìƒí‘œ(ë¸Œëœë“œ)ë¥¼ ë¶™ì—¬ì¤€ë‹¤.

```tsx
interface Vector2D{
  **_brand: '2d';**
  x: number;
  y: number;
}
function vec2D(x: number, y: number) :Vector2D {
  return {x, y, _brand:'2d'};
}
```

- ì´ì œ 3ì°¨ì› ê°’ì„ ë„£ì–´ì£¼ë©´ â€˜_brandâ€™ ì†ì„±ì´ ì—†ê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.
- ë¬¼ë¡  ì•…ì˜ì ìœ¼ë¡œ 3ì°¨ì› ê°’ì— _brand: â€˜2dâ€™ë¥¼ ë„£ëŠ” ê²ƒì€ ë§‰ì„ ìˆ˜ ì—†ì§€ë§Œ, ê°œë°œìì˜ ë‹¨ìˆœ ì‹¤ìˆ˜ë¥¼ ë°©ì§€í•˜ê¸°ì—ëŠ” ì¶©ë¶„í•˜ë‹¤.

### ëŸ°íƒ€ì„ì— ìƒí‘œë¥¼ ê²€ì‚¬í•˜ëŠ” ê²ƒê³¼ ë™ì¼í•œ íš¨ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤. (â“)

ì ˆëŒ€ ê²½ë¡œë¥¼ ì„¤ì •í•  ë•Œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì•„ë˜ ì½”ë“œëŠ” ì ˆëŒ€ ê²½ë¡œë¥¼ í†µí•´ íŒŒì¼ ì‹œìŠ¤í…œì— ì ‘ê·¼í•˜ëŠ” í•¨ìˆ˜ë¥¼ ê°€ì •í•œë‹¤.

```tsx
type AbsolutePath = string & {_brand: 'abs'};

function listAbsolutePath(path: AbsolutePath) {
  // ...
}

function isAbsolutePath(path: string): path is AbsolutePath {
  return path.startsWith('/');
}

function f(path: string) {
  if (isAbsolutePath(path)) {
    listAbsolutePath(path);
  }
  listAbsolutePath(path);
                // ~~~~ 'string' í˜•ì‹ì˜ ì¸ìˆ˜ëŠ” 'AbsolutePath' í˜•ì‹ì˜
								// ë§¤ê°œ ë³€ìˆ˜ì— í• ë‹¹ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
}
```

- string íƒ€ì…ì´ë©´ì„œ, `_brand` ì†ì„±ì„ ê°€ì§€ëŠ” ê°ì²´ë¥¼ ë§Œë“¤ ìˆ˜ ì—†ë‹¤.
    - ë•Œë¬¸ì— AbsolutePathëŠ” ì˜¨ì „íˆ íƒ€ì… ì‹œìŠ¤í…œì˜ ì˜ì—­ì´ë‹¤.